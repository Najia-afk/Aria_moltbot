{
  "name": "aria-agent-manager",
  "version": "2.0.0",
  "description": "Runtime agent lifecycle management â€” spawn, monitor, terminate, prune sessions",
  "author": "Aria Blue",
  "layer": 3,
  "dependencies": ["api_client", "session_manager"],
  "focus_affinity": ["orchestrator"],
  "config_keys": ["api_url"],
  "api_backed": true,
  "tools": [
    {
      "name": "list_agents",
      "description": "List agent sessions, optionally filtered by status or agent_id.",
      "input_schema": {
        "type": "object",
        "properties": {
          "status": { "type": "string", "description": "Filter by agent status" },
          "agent_id": { "type": "string", "description": "Filter by agent ID" },
          "limit": { "type": "integer", "description": "Max results (default: 50)" }
        }
      }
    },
    {
      "name": "spawn_agent",
      "description": "Spawn a new agent session with context protocol.",
      "input_schema": {
        "type": "object",
        "properties": {
          "agent_type": { "type": "string", "description": "Type of agent to spawn" },
          "context": { "type": "object", "description": "Initial context for the agent" }
        },
        "required": ["agent_type"]
      }
    },
    {
      "name": "terminate_agent",
      "description": "Gracefully terminate an agent session.",
      "input_schema": {
        "type": "object",
        "properties": {
          "session_id": { "type": "string", "description": "Session ID to terminate" }
        },
        "required": ["session_id"]
      }
    },
    {
      "name": "get_agent_stats",
      "description": "Get usage metrics for a specific agent session.",
      "input_schema": {
        "type": "object",
        "properties": {
          "session_id": { "type": "string", "description": "Session ID to get stats for" }
        },
        "required": ["session_id"]
      }
    },
    {
      "name": "prune_stale_sessions",
      "description": "Bulk cleanup of stale agent sessions.",
      "input_schema": {
        "type": "object",
        "properties": {
          "max_age_hours": { "type": "number", "description": "Max age in hours (default: 24)" }
        }
      }
    },
    {
      "name": "get_performance_report",
      "description": "Generate aggregate performance metrics across all agents.",
      "input_schema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "get_agent_health",
      "description": "Check all active agents, their status, uptime, and recent performance.",
      "input_schema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "spawn_focused_agent",
      "description": "Spawn a sub-agent with scoped context, send it a task, and return its response. Set persistent=true to keep the session open for follow-ups via send_to_agent, or persistent=false (default) for one-shot ephemeral tasks.",
      "input_schema": {
        "type": "object",
        "properties": {
          "task": { "type": "string", "description": "Task description for the sub-agent" },
          "focus": { "type": "string", "description": "Focus area (research, devsecops, creative, etc.)" },
          "tools": { "type": "array", "items": { "type": "string" }, "description": "List of allowed tool/skill names" },
          "model": { "type": "string", "description": "Optional LLM model ID (defaults to system model)" },
          "persistent": { "type": "boolean", "description": "If true, session stays open for follow-ups. If false (default), session auto-closes after response.", "default": false }
        },
        "required": ["task", "focus", "tools"]
      }
    },
    {
      "name": "send_to_agent",
      "description": "Send a follow-up message to a persistent sub-agent session created by spawn_focused_agent(persistent=true). Returns the sub-agent's response.",
      "input_schema": {
        "type": "object",
        "properties": {
          "session_id": { "type": "string", "description": "Session UUID from spawn_focused_agent" },
          "message": { "type": "string", "description": "Follow-up message / instruction" },
          "enable_tools": { "type": "boolean", "description": "Whether the sub-agent may call tools (default true)", "default": true }
        },
        "required": ["session_id", "message"]
      }
    }
  ]
}
