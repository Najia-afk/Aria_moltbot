{
  "name": "aria-pytest-runner",
  "version": "1.0.0",
  "description": "Run pytest for Aria codebase and return structured results.",
  "author": "Aria Team",
  "layer": 3,
  "dependencies": [
    "api_client"
  ],
  "focus_affinity": [
    "devsecops"
  ],
  "tools": [
    {
      "name": "run_tests",
      "description": "Run pytest and return stdout/stderr with exit code.",
      "parameters": {
        "type": "object",
        "properties": {
          "paths": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Test paths to run (default: tests)"
          },
          "markers": {
            "type": "string",
            "description": "Pytest marker expression"
          },
          "keyword": {
            "type": "string",
            "description": "Pytest -k expression"
          },
          "extra_args": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Additional pytest args"
          },
          "timeout_sec": {
            "type": "integer",
            "description": "Timeout in seconds"
          }
        }
      }
    },
    {
      "name": "get_last_result",
      "description": "Get the result of the last pytest run.",
      "parameters": {
        "type": "object",
        "properties": {}
      }
    }
  ],
  "run": "python3 /app/skills/run_skill.py pytest {{tool}} '{{args_json}}'"
}
