<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadows of Absalom â€” When AI Agents Play D&amp;D</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Crimson+Pro:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/vis-network@9.1.9/standalone/umd/vis-network.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
/* ===== Base Reset & Theme ===== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
    --bg-primary: #0a0a1a;
    --bg-secondary: #12122a;
    --bg-card: rgba(255,255,255,0.02);
    --text-primary: #e0e0f0;
    --text-secondary: #b0b0cc;
    --text-muted: #666688;
    --border-subtle: rgba(255,255,255,0.06);
    --border-hover: rgba(255,255,255,0.12);
    --accent-purple: #6c5ce7;
    --accent-green: #00b894;
    --accent-pink: #fd79a8;
    --accent-yellow: #fdcb6e;
    --accent-red: #e17055;
    --accent-blue: #74b9ff;
    --accent-amber: #f0932b;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    line-height: 1.7;
    -webkit-font-smoothing: antialiased;
}

/* ===== Article Layout ===== */
.article-page {
    max-width: 860px;
    margin: 0 auto;
    padding: 2rem 1.5rem 4rem;
}

.article-back-nav {
    margin-bottom: 2rem;
}
.article-back-nav a {
    color: var(--text-muted);
    text-decoration: none;
    font-size: 0.85rem;
    transition: color 0.2s;
}
.article-back-nav a:hover { color: var(--accent-purple); }

/* ===== Header ===== */
.article-header {
    margin-bottom: 3rem;
}
.article-meta-top {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
}
.tag {
    display: inline-block;
    padding: 0.2rem 0.7rem;
    border-radius: 4px;
    font-size: 0.72rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
}
.tag-rpg { background: rgba(108,92,231,0.2); color: #a29bfe; border: 1px solid rgba(108,92,231,0.3); }
.tag-live { background: rgba(0,184,148,0.15); color: #55efc4; border: 1px solid rgba(0,184,148,0.3); }
.tag-combat { background: rgba(225,112,85,0.15); color: #fab1a0; border: 1px solid rgba(225,112,85,0.3); }
.tag-agents { background: rgba(253,203,110,0.15); color: #ffeaa7; border: 1px solid rgba(253,203,110,0.3); }
.article-date {
    color: var(--text-secondary);
    font-size: 0.85rem;
}
.article-title {
    font-family: 'Crimson Pro', Georgia, serif;
    font-size: 2.6rem;
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: 1rem;
    background: linear-gradient(135deg, #e0e0f0 0%, #a29bfe 50%, #fd79a8 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}
.article-lead {
    font-size: 1.15rem;
    line-height: 1.7;
    color: var(--text-secondary);
    max-width: 720px;
    margin-bottom: 1.5rem;
}
.article-meta-bar {
    display: flex;
    gap: 2rem;
    flex-wrap: wrap;
    padding: 1rem 0;
    border-top: 1px solid var(--border-subtle);
    border-bottom: 1px solid var(--border-subtle);
    margin-bottom: 2rem;
}
.meta-item { display: flex; flex-direction: column; gap: 0.2rem; }
.meta-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-muted); }
.meta-value { font-size: 0.9rem; color: var(--text-primary); font-weight: 500; }

/* ===== Sections ===== */
.article-section {
    margin-bottom: 3rem;
}
.article-section h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: var(--text-primary);
}
.accent-dot {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--accent-purple);
    margin-right: 0.5rem;
    vertical-align: middle;
}

/* ===== Conversation Turns ===== */
.conversation-turn {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: 12px;
    padding: 1.5rem;
    margin: 1.25rem 0;
    transition: border-color 0.3s;
}
.conversation-turn:hover { border-color: var(--border-hover); }
.turn-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}
.agent-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    font-size: 0.95rem;
}
.agent-dot {
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
}
.agent-master { color: #a29bfe; }
.agent-thorin { color: #f0932b; }
.agent-paladin { color: #74b9ff; }
.agent-npc { color: #55efc4; }
.agent-boss { color: #fab1a0; }
.agent-sera { color: #fd79a8; }
.turn-round {
    font-size: 0.75rem;
    color: var(--text-muted);
    background: rgba(255,255,255,0.05);
    padding: 0.25rem 0.6rem;
    border-radius: 4px;
}
.turn-body p { margin-bottom: 0.75rem; color: var(--text-secondary); font-size: 0.92rem; }
.turn-body p:last-child { margin-bottom: 0; }
.turn-body blockquote {
    background: rgba(255,255,255,0.03);
    border-left: 3px solid rgba(108,92,231,0.5);
    padding: 1rem 1.25rem;
    border-radius: 0 8px 8px 0;
    margin: 1rem 0;
    font-style: italic;
    color: var(--text-primary);
    line-height: 1.7;
}
.turn-body .dice-result {
    display: inline-block;
    background: rgba(108,92,231,0.15);
    border: 1px solid rgba(108,92,231,0.3);
    padding: 0.15rem 0.5rem;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    font-size: 0.85rem;
    font-weight: 600;
    color: #a29bfe;
}
.turn-body .dice-crit {
    background: rgba(253,203,110,0.2);
    border-color: rgba(253,203,110,0.4);
    color: #ffeaa7;
}
.turn-body .tool-tag {
    display: inline-block;
    background: rgba(0,184,148,0.1);
    border: 1px solid rgba(0,184,148,0.25);
    padding: 0.1rem 0.45rem;
    border-radius: 3px;
    font-size: 0.72rem;
    font-family: monospace;
    color: #55efc4;
    margin: 0.1rem;
}

/* ===== Prompt Callout ===== */
.roundtable-prompt {
    background: linear-gradient(135deg, rgba(108,92,231,0.1), rgba(0,184,148,0.08));
    border-left: 4px solid var(--accent-purple);
    padding: 1.25rem 1.5rem;
    border-radius: 0 8px 8px 0;
    margin: 1.5rem 0;
    font-size: 1.05rem;
    font-style: italic;
    color: var(--text-primary);
}
.prompt-label {
    display: block;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--accent-purple);
    font-style: normal;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

/* ===== Stat Block ===== */
.stat-block {
    background: linear-gradient(135deg, rgba(15,15,35,0.95), rgba(25,25,55,0.95));
    border: 1px solid rgba(108,92,231,0.25);
    border-radius: 10px;
    padding: 1.25rem;
    margin: 1rem 0;
    font-size: 0.88rem;
}
.stat-block h4 {
    color: var(--accent-amber);
    font-size: 1rem;
    margin-bottom: 0.5rem;
}
.stat-block .stat-row {
    display: flex;
    justify-content: space-between;
    padding: 0.25rem 0;
    border-bottom: 1px solid rgba(255,255,255,0.04);
}
.stat-block .stat-label { color: var(--text-muted); }
.stat-block .stat-val { color: var(--text-primary); font-weight: 500; }

/* ===== Combat Log ===== */
.combat-log {
    background: rgba(225,112,85,0.05);
    border: 1px solid rgba(225,112,85,0.15);
    border-radius: 10px;
    padding: 1.25rem;
    margin: 1rem 0;
    font-size: 0.88rem;
}
.combat-log h4 {
    color: var(--accent-red);
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.75rem;
}
.combat-entry {
    padding: 0.4rem 0;
    border-bottom: 1px solid rgba(255,255,255,0.03);
    color: var(--text-secondary);
}
.combat-entry:last-child { border-bottom: none; }
.combat-entry strong { color: var(--text-primary); }
.hit { color: #55efc4; }
.miss { color: #636e72; }
.crit { color: #ffeaa7; font-weight: 700; }

/* ===== Charts ===== */
.chart-container {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: 12px;
    padding: 1.5rem;
    margin: 1.25rem 0;
}
.chart-container h4 {
    font-size: 0.9rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.04em;
    margin-bottom: 1rem;
}
.chart-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.25rem;
    margin: 1.5rem 0;
}

/* ===== Insights Grid ===== */
.insights-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 1.25rem;
    margin: 1.5rem 0;
}
.insight-card {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: 10px;
    padding: 1.25rem;
    transition: transform 0.2s, border-color 0.3s;
}
.insight-card:hover {
    transform: translateY(-2px);
    border-color: rgba(108,92,231,0.3);
}
.insight-icon { font-size: 1.8rem; margin-bottom: 0.75rem; }
.insight-card h4 { font-size: 1rem; margin-bottom: 0.5rem; color: var(--text-primary); }
.insight-card p { font-size: 0.88rem; line-height: 1.6; color: var(--text-secondary); }

/* ===== Synthesis ===== */
.synthesis-intro { color: var(--text-secondary); margin-bottom: 1.25rem; }
.synthesis-block {
    background: linear-gradient(135deg, rgba(253,203,110,0.05), rgba(108,92,231,0.05));
    border: 1px solid rgba(253,203,110,0.2);
    border-radius: 12px;
    overflow: hidden;
}
.synthesis-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1.25rem;
    background: rgba(253,203,110,0.08);
    border-bottom: 1px solid rgba(253,203,110,0.15);
}
.synthesis-badge { font-weight: 600; font-size: 0.9rem; color: #ffeaa7; }
.synthesis-agent { font-size: 0.78rem; color: var(--text-muted); }
.synthesis-content { padding: 1.5rem; }
.synthesis-content h3 { font-size: 1rem; color: #ffeaa7; margin: 1.25rem 0 0.5rem; }
.synthesis-content h3:first-child { margin-top: 0; }
.synthesis-content p, .synthesis-content li { font-size: 0.9rem; line-height: 1.7; color: var(--text-secondary); }
.synthesis-content ol, .synthesis-content ul { padding-left: 1.25rem; margin: 0.75rem 0; }
.synthesis-content li { margin-bottom: 0.5rem; }
.synthesis-content blockquote {
    background: rgba(253,203,110,0.06);
    border-left: 3px solid var(--accent-yellow);
    padding: 0.75rem 1rem;
    border-radius: 0 6px 6px 0;
    margin: 1rem 0;
    font-style: italic;
    color: var(--text-primary);
}

/* ===== Closing ===== */
.article-closing {
    text-align: center;
    padding: 2rem 1rem;
    max-width: 640px;
    margin: 0 auto;
}
.article-closing p { font-size: 1.05rem; line-height: 1.7; color: var(--text-secondary); }
.closing-cta { font-size: 1.15rem !important; font-weight: 600; color: var(--text-primary) !important; margin-top: 1rem; }

/* ===== Related Links ===== */
.related-links {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1rem;
}
.related-card {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    padding: 1rem;
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: 10px;
    text-decoration: none;
    transition: border-color 0.2s, transform 0.2s;
    color: inherit;
}
.related-card:hover { border-color: rgba(108,92,231,0.4); transform: translateY(-2px); }
.related-icon { font-size: 1.5rem; flex-shrink: 0; margin-top: 0.15rem; }
.related-card strong { display: block; color: var(--text-primary); margin-bottom: 0.25rem; font-size: 0.95rem; }
.related-card p { font-size: 0.82rem; color: var(--text-muted); margin: 0; line-height: 1.5; }

/* ===== Graph Legend ===== */
.graph-legend {
    display: flex;
    gap: 1.5rem;
    flex-wrap: wrap;
    margin-bottom: 2rem;
    font-size: 0.82rem;
    color: var(--text-secondary);
}
.legend-dot {
    display: inline-block;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    vertical-align: middle;
    margin-right: 4px;
}
.legend-diamond {
    display: inline-block;
    width: 12px;
    height: 12px;
    border-radius: 3px;
    vertical-align: middle;
    margin-right: 4px;
    transform: rotate(45deg);
}

/* ===== Responsive ===== */
@media (max-width: 768px) {
    .article-title { font-size: 1.8rem; }
    .article-meta-bar { gap: 1rem; }
    .insights-grid { grid-template-columns: 1fr; }
    .related-links { grid-template-columns: 1fr; }
    .chart-row { grid-template-columns: 1fr; }
    #story-graph { height: 380px !important; }
    .conversation-turn { padding: 1rem; }
}
    </style>
</head>
<body>

<article class="article-page">

    <!-- ===== BACK NAV ===== -->
    <nav class="article-back-nav">
        <a href="#">&larr; Back to Portfolio</a>
    </nav>

    <!-- ===== HERO HEADER ===== -->
    <header class="article-header">
        <div class="article-meta-top">
            <span class="tag tag-rpg">Pathfinder 2e</span>
            <span class="tag tag-live">Multi-Agent</span>
            <span class="tag tag-combat">Combat</span>
            <span class="tag tag-agents">4-Agent Roundtable</span>
            <time class="article-date">February 22, 2026</time>
        </div>
        <h1 class="article-title">Shadows of Absalom:<br>When AI Agents Play D&amp;D</h1>
        <p class="article-lead">
            What happens when you give an AI engine 35 RPG tools, 4 specialized agents, and a Pathfinder&nbsp;2e campaign?
            It doesn&rsquo;t just roll dice &mdash; it builds a <em>living world</em>,
            runs tactical combat with critical hits, conducts a multi-agent roundtable debate on strategy,
            and remembers everything across sessions.
        </p>
        <div class="article-meta-bar">
            <div class="meta-item">
                <span class="meta-label">Players</span>
                <span class="meta-value">
                    <span style="color:#f0932b;">&#9679;</span> Thorin (Claude) &nbsp;
                    <span style="color:#a29bfe;">&#9679;</span> Aria (DM) &nbsp;
                    <span style="color:#fd79a8;">&#9679;</span> Seraphina (NPC)
                </span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Campaign</span>
                <span class="meta-value">Shadows of Absalom &middot; Puddles District</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Sessions</span>
                <span class="meta-value">5 sessions &middot; 11 messages &middot; 66+ tool calls</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Roundtable</span>
                <span class="meta-value">4 agents &middot; 2 rounds &middot; 8 turns</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Engine</span>
                <span class="meta-value">Aria v3 &middot; Kimi + Trinity models</span>
            </div>
        </div>
    </header>

    <!-- ===== STORY FLOW GRAPH (vis.js) ===== -->
    <section class="article-section">
        <h2><span class="accent-dot"></span> Story Flow</h2>
        <p>
            This interactive graph maps the full arc of the <em>Shadows of Absalom</em> campaign.
            Each node represents a key story beat or combat encounter.
            Hover over nodes for details &mdash; the edges trace how the narrative flows
            from tavern to sealed horror.
        </p>

        <div id="story-graph" style="
            width: 100%;
            height: 520px;
            background: linear-gradient(135deg, rgba(15,15,35,0.95), rgba(25,25,55,0.95));
            border: 1px solid rgba(108,92,231,0.3);
            border-radius: 12px;
            margin: 1.5rem 0 2rem;
            position: relative;
            overflow: hidden;
        ">
            <div style="position:absolute;top:12px;left:16px;font-size:0.7rem;color:rgba(255,255,255,0.3);z-index:5;pointer-events:none;">
                vis.js &middot; campaign story graph
            </div>
        </div>

        <div class="graph-legend">
            <span><span class="legend-dot" style="background:#6c5ce7;"></span> Story Beats</span>
            <span><span class="legend-dot" style="background:#e17055;"></span> Combat</span>
            <span><span class="legend-dot" style="background:#00b894;"></span> Skill Checks</span>
            <span><span class="legend-diamond" style="background:#fd79a8;"></span> Themes</span>
            <span><span class="legend-diamond" style="background:#fdcb6e;"></span> Roundtable</span>
        </div>
    </section>

    <!-- ===== THE PARTY ===== -->
    <section class="article-section">
        <h2><span class="accent-dot"></span> The Party</h2>
        <p>Two AI-controlled characters &mdash; one played by Claude as the player, one by Aria as the NPC companion.</p>

        <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 1.25rem; margin-top: 1rem;">
            <div class="stat-block">
                <h4>&#9876; Thorin Ashveil</h4>
                <div class="stat-row"><span class="stat-label">Played by</span><span class="stat-val" style="color:#f0932b;">Claude (Player)</span></div>
                <div class="stat-row"><span class="stat-label">Ancestry</span><span class="stat-val">Dwarf</span></div>
                <div class="stat-row"><span class="stat-label">Class</span><span class="stat-val">Fighter &middot; Lv 1</span></div>
                <div class="stat-row"><span class="stat-label">HP</span><span class="stat-val">23</span></div>
                <div class="stat-row"><span class="stat-label">AC</span><span class="stat-val">18 (20 w/ Shield)</span></div>
                <div class="stat-row"><span class="stat-label">Weapon</span><span class="stat-val">Warhammer +9 (1d8+4)</span></div>
                <div class="stat-row"><span class="stat-label">Key Skills</span><span class="stat-val">Athletics +7, Survival +5, Perception +5</span></div>
                <div class="stat-row"><span class="stat-label">Traits</span><span class="stat-val">Darkvision, Clan Dagger, Shield Block</span></div>
            </div>
            <div class="stat-block">
                <h4>&#128737; Seraphina Dawnblade</h4>
                <div class="stat-row"><span class="stat-label">Played by</span><span class="stat-val" style="color:#fd79a8;">Aria (NPC)</span></div>
                <div class="stat-row"><span class="stat-label">Ancestry</span><span class="stat-val">Half-Elf</span></div>
                <div class="stat-row"><span class="stat-label">Class</span><span class="stat-val">Champion of Iomedae &middot; Lv 1</span></div>
                <div class="stat-row"><span class="stat-label">HP</span><span class="stat-val">15</span></div>
                <div class="stat-row"><span class="stat-label">AC</span><span class="stat-val">18</span></div>
                <div class="stat-row"><span class="stat-label">Weapon</span><span class="stat-val">Longsword +7 (1d8+3)</span></div>
                <div class="stat-row"><span class="stat-label">Key Skills</span><span class="stat-val">Religion +6, Diplomacy +5, Medicine +4</span></div>
                <div class="stat-row"><span class="stat-label">Traits</span><span class="stat-val">Retributive Strike, Lay on Hands, Low-Light Vision</span></div>
            </div>
        </div>
    </section>

    <!-- ===== ACT 1: THE CALL ===== -->
    <section class="article-section">
        <h2><span class="accent-dot"></span> Act I &mdash; The Call</h2>
        <p>
            The campaign opened in the <strong>Soggy Parchment Tavern</strong>, deep in the Puddles district of Absalom.
            Aria&rsquo;s RPG Master agent fired <strong>15 tool calls</strong> in the first message alone &mdash;
            attempting to create the campaign, add characters to the party, start a session, and populate the knowledge graph.
            Three tools succeeded; twelve failed (the RPG backend wasn&rsquo;t fully wired). Aria adapted on the fly,
            using <span class="tool-tag">write_artifact</span> and <span class="tool-tag">set_memory</span> as fallbacks.
        </p>

        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-master"><span class="agent-dot" style="background:#6c5ce7;"></span> Aria (DM)</div>
                <span class="turn-round">Message 1 &middot; 15 tool calls</span>
            </div>
            <div class="turn-body">
                <blockquote>
                    The rain falls in sheets onto the warped wooden sign of the Soggy Parchment &mdash; a dockside tavern
                    that leans precariously over the harbor, its foundations slowly surrendering to the Puddles&rsquo; rising waters.
                    Inside, the air is thick with pipe smoke, the smell of salt-damp wool, and the quiet desperation
                    of people who live where Absalom forgot them.
                </blockquote>
                <p>
                    A woman stumbled through the door &mdash; <strong>Elara Vance</strong>, alchemist, wild-eyed and clutching stone fragments.
                    Her brother <strong>Caelus</strong> had been taken by cultists operating from the <strong>Drowning Stone</strong>,
                    an abandoned warehouse sinking into the harbor. She spread her fragments across the table:
                    dwarven tablets, ancient, inscribed with a single word &mdash;
                </p>
                <blockquote>
                    <strong>&ldquo;ABOLETH.&rdquo;</strong>
                </blockquote>
                <p>
                    The cultists were attempting to break a binding seal over something ancient and terrible beneath the Drowning Stone.
                    They had until midnight &mdash; <strong>five hours</strong>.
                </p>
            </div>
        </div>

        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-thorin"><span class="agent-dot" style="background:#f0932b;"></span> Thorin (Claude)</div>
                <span class="turn-round">Message 2 &middot; Recall Knowledge</span>
            </div>
            <div class="turn-body">
                <p>
                    Thorin examined the stone fragments, recognizing dwarven craftsmanship.
                    He requested a <strong>Recall Knowledge</strong> check (Crafting +3).
                </p>
                <p>
                    <span class="dice-result">Crafting: 14 + 3 = 17 vs DC 15 &mdash; SUCCESS</span>
                </p>
                <blockquote>
                    The tablets bore the Ashveil Hammer-Fall sigil &mdash; Thorin&rsquo;s own clan mark.
                    These were <em>hringr-steinn</em>, &ldquo;ring-stones&rdquo; &mdash; binding anchors
                    crafted by the Ashveil dwarves to seal an aboleth horror beneath the harbor generations ago.
                    The binding circle was still active. The cultists were trying to break it.
                </blockquote>
                <p>
                    Elara&rsquo;s briefing filled in the gaps: <strong>12+ cultists</strong> inside,
                    led by someone called &ldquo;the <strong>Tidecaller</strong>.&rdquo;
                    Caelus was alive but being used in the ritual.
                </p>
            </div>
        </div>
    </section>

    <!-- ===== ACT 2: THE JOURNEY ===== -->
    <section class="article-section">
        <h2><span class="accent-dot"></span> Act II &mdash; The Journey</h2>

        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-thorin"><span class="agent-dot" style="background:#f0932b;"></span> Thorin &amp; Seraphina</div>
                <span class="turn-round">Message 3 &middot; Survival Check</span>
            </div>
            <div class="turn-body">
                <p>
                    Thorin checked gear &mdash; warhammer, chain mail, shield, two throwing hammers, torches, 50&rsquo; rope &mdash;
                    and led the party into the Puddles at a dead run.
                </p>
                <p>
                    <span class="dice-result">Survival: 15 + 5 = 20 vs DC 15 &mdash; SUCCESS</span>
                </p>
                <blockquote>
                    The Puddles district is a maze of half-flooded streets and collapsing buildings.
                    Thorin navigated by dwarven instinct &mdash; reading the waterline on walls, avoiding sinkholes,
                    leading Sera through stable paths where the cobblestones still held.
                </blockquote>
                <p>
                    Seraphina blessed her longsword as they moved, whispering prayers to Iomedae.
                    Golden light flickered along the blade&rsquo;s edge.
                </p>
                <blockquote>
                    &ldquo;The darkness ahead isn&rsquo;t just absence of light, Thorin. Something <em>feeds</em> down there.
                    My goddess shows me a vision &mdash; a circle of silver light, and something vast pressing against it from below.&rdquo;
                </blockquote>
                <p>
                    They arrived at the <strong>Drowning Stone</strong>: a massive warehouse listing 15 degrees,
                    its lower pilings vanishing into black water. A shattered padlock hung from the main door.
                    Salt-encrusted windows. Three possible entry points identified.
                </p>
            </div>
        </div>
    </section>

    <!-- ===== ACT 3: RECONNAISSANCE ===== -->
    <section class="article-section">
        <h2><span class="accent-dot"></span> Act III &mdash; Reconnaissance</h2>

        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-thorin"><span class="agent-dot" style="background:#f0932b;"></span> Thorin</div>
                <span class="turn-round">Message 4 &middot; Perception + Darkvision</span>
            </div>
            <div class="turn-body">
                <p>
                    Thorin crouched behind a pylon and used his dwarven darkvision to scan the exterior,
                    then crept to the entrance to listen.
                </p>
                <p>
                    <span class="dice-result">Perception (Listen): 14 + 5 = 19 &mdash; SUCCESS</span>
                    &nbsp;
                    <span class="dice-result">Perception (Darkvision Scan): 16 + 5 = 21 &mdash; CRITICAL</span>
                </p>
                <blockquote>
                    Through the walls: rhythmic chanting in a language that predates Common.
                    Three distinct voices, low and droning. Occasional metallic clink &mdash; chains.
                    One voice weaker than the others &mdash; likely Caelus, still alive.
                </blockquote>
                <p>
                    Sera&rsquo;s divine sense confirmed it: the evil inside wasn&rsquo;t just the cultists.
                    Something <em>older</em> pressed against the seal below.
                </p>
            </div>
        </div>

        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-master"><span class="agent-dot" style="background:#6c5ce7;"></span> Aria (DM)</div>
                <span class="turn-round">Message 5 &middot; Entry</span>
            </div>
            <div class="turn-body">
                <p>
                    Thorin chose the <strong>loading bay entrance</strong> &mdash; a partially submerged cargo door
                    on the warehouse&rsquo;s east side. Inside: a tilted floor, ankle-deep water, and&hellip;
                </p>
                <blockquote>
                    Two shapes in the darkness. Not human &mdash; not anymore. Skeletal dockworkers,
                    their bones held together by blue-green bioluminescent tendrils of corrupted water.
                    <strong>Drowned Skeletons</strong> &mdash; guardians of the outer chamber.
                    The water around them pulsed with a faint, sickly light.
                </blockquote>
            </div>
        </div>
    </section>

    <!-- ===== ACT 4: FIRST BLOOD ===== -->
    <section class="article-section">
        <h2><span class="accent-dot"></span> Act IV &mdash; First Blood</h2>
        <p>
            The first real test of Aria&rsquo;s combat system. Two rounds of Pathfinder&nbsp;2e tactical combat,
            fully resolved with <span class="tool-tag">rpg_pathfinder__roll_initiative</span>,
            <span class="tool-tag">rpg_pathfinder__attack</span>, and
            <span class="tool-tag">rpg_pathfinder__check</span>.
        </p>

        <div class="combat-log">
            <h4>&#9876; Combat Round 1 &mdash; Skeletons at the Loading Bay</h4>
            <div class="combat-entry">
                <strong>Initiative:</strong>
                Thorin <span class="dice-result">24</span> &nbsp;
                Seraphina <span class="dice-result">20</span> &nbsp;
                Skeleton 1 <span class="dice-result">14</span> &nbsp;
                Skeleton 2 <span class="dice-result">14</span>
            </div>
            <div class="combat-entry">
                <strong>Thorin Action 1:</strong> Throwing hammer at Skeleton 1 &rarr;
                <span class="dice-result">22 vs AC 15</span> = <span class="hit">HIT!</span> 5 damage.
            </div>
            <div class="combat-entry">
                <strong>Thorin Action 2:</strong> Stride 15ft, draw warhammer.
            </div>
            <div class="combat-entry">
                <strong>Thorin Action 3:</strong> Warhammer at Skeleton 1 &rarr;
                <span class="dice-result">19 vs AC 15</span> = <span class="hit">HIT!</span>
                9 damage. Skeleton 1 <strong>dazzled</strong> by the impact.
            </div>
            <div class="combat-entry">
                <strong>Seraphina:</strong> Stride &rarr; Longsword at Skeleton 1 &rarr;
                <span class="hit">HIT!</span> 7 damage. <strong>Skeleton 1 at 1 HP.</strong>
            </div>
            <div class="combat-entry">
                <strong>Skeletons:</strong> Skeleton 1 claw at Thorin &rarr; <span class="miss">MISS</span> (13 vs AC 18).
                Skeleton 2 claw at Sera &rarr; <span class="miss">MISS</span> (11 vs AC 18).
            </div>
        </div>

        <div class="combat-log">
            <h4>&#9876; Combat Round 2 &mdash; Thorin&rsquo;s Wrath</h4>
            <div class="combat-entry">
                <strong>Thorin Action 1:</strong> Warhammer at Skeleton 1 &rarr;
                <span class="dice-result dice-crit">NATURAL 20 + 9 = 29 &mdash; CRITICAL HIT!</span>
                (6+6)&times;2 = <strong class="crit">24 bludgeoning damage!</strong> Skeleton 1 <strong>PULVERIZED.</strong>
            </div>
            <div class="combat-entry">
                <strong>Thorin Action 2:</strong> Stride 10ft to Skeleton 2 (flanking with Sera).
            </div>
            <div class="combat-entry">
                <strong>Thorin Action 3:</strong> Warhammer (MAP -5) &rarr;
                <span class="dice-result">18 vs AC 15</span> = <span class="hit">HIT!</span>
                11 damage. <strong>Skeleton 2 DESTROYED.</strong>
            </div>
        </div>

        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-master"><span class="agent-dot" style="background:#6c5ce7;"></span> Aria (DM)</div>
                <span class="turn-round">Post-Combat Narration</span>
            </div>
            <div class="turn-body">
                <blockquote>
                    Two swings. Two piles of bone. The bioluminescent tendrils fade, the corrupted water draining away.
                    Sera sheathes her sword with a quiet nod: &ldquo;Iomedae&rsquo;s chosen warriors could not have done better.&rdquo;
                </blockquote>
                <p>
                    The skeletons were decades-old dockworkers, preserved by aboleth influence.
                    Below, torchlight flickered. Descending stairs awaited.
                </p>
            </div>
        </div>
    </section>

    <!-- ===== ACT 5: THE DESCENT ===== -->
    <section class="article-section">
        <h2><span class="accent-dot"></span> Act V &mdash; The Descent</h2>

        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-thorin"><span class="agent-dot" style="background:#f0932b;"></span> Thorin</div>
                <span class="turn-round">Message 8 &middot; Trap Detection</span>
            </div>
            <div class="turn-body">
                <p>
                    Thorin checked the descending stairs for traps before committing.
                </p>
                <p>
                    <span class="dice-result">Perception (Traps): 16 + 5 = 21 &mdash; SUCCESS</span>
                </p>
                <blockquote>
                    Found a pressure plate on step three and a tripwire on step seven. Stepped over both.
                    The stairs spiraled down thirty feet into warm, humid air that smelled of brine and old blood.
                </blockquote>
            </div>
        </div>

        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-master"><span class="agent-dot" style="background:#6c5ce7;"></span> Aria (DM)</div>
                <span class="turn-round">Message 8 &middot; The Sunken Sanctum</span>
            </div>
            <div class="turn-body">
                <p>Aria delivered a <strong>massive tactical survey</strong> of the boss arena &mdash; the most detailed single response of the campaign (29,185 tokens):</p>
                <blockquote>
                    <strong>The Sunken Sanctum</strong> &mdash; an octagonal chamber, 60&times;80 feet, 25 feet high.
                    Four feet of viscous water cover the floor, bioluminescent blue-green, pulsing like a heartbeat.
                </blockquote>
                <p><strong>Enemies visible (5):</strong></p>
                <ul style="color:var(--text-secondary); font-size:0.9rem; padding-left:1.5rem; margin:0.75rem 0;">
                    <li>2 cultists manning winches (east wall)</li>
                    <li>1 cultist tending braziers (west wall)</li>
                    <li>1 cultist on central platform (leading ritual chant)</li>
                    <li><strong>The Ritual Master</strong> &mdash; purple velvet robes, bronze fish-mask, stone dagger dripping red</li>
                </ul>
                <p><strong>Caelus Vance:</strong> Chained to a broken pillar (NE corner), conscious but barely. Ritual cuts on his chest. A copper collar connected to a chain leading <em>down into the water</em>.</p>
                <blockquote>
                    <strong>THE BINDING CIRCLE:</strong> Dead center, raised 5-foot platform.
                    Outer ring: the original Ashveil hringr-steinn, glowing silver.
                    Inner ring: newer chaotic symbols, pulsing green-black.
                    A stone plug 10 feet across &mdash; <strong>CRACKED</strong>.
                    Something moves in the darkness below.
                    <br><br>
                    <strong>Ritual State: 40% corrupted.</strong> Blood poured on the seal. Chanting maintains a psychic barrier.
                </blockquote>
                <p>
                    Sera whispered: <em>&ldquo;The seal is fracturing. If they complete at midnight, that stone plug shatters.&rdquo;</em>
                </p>
            </div>
        </div>
    </section>

    <!-- ===== ACT 6: THE BATTLE ===== -->
    <section class="article-section">
        <h2><span class="accent-dot"></span> Act VI &mdash; The Battle</h2>
        <p>
            Three rounds of desperate combat in chest-deep aboleth-tainted water.
            This is where Aria&rsquo;s RPG engine truly shone &mdash; tracking initiative order, multiple attack penalties,
            reactions, environmental hazards, and NPC AI across <strong>three full messages</strong> of tactical resolution.
        </p>

        <!-- ROUND 1 -->
        <div class="combat-log">
            <h4>&#9876; Boss Fight &mdash; Round 1</h4>
            <div class="combat-entry">
                <strong>Initiative:</strong>
                Thorin <span class="dice-result">23</span> &nbsp;
                Sera <span class="dice-result">21</span> &nbsp;
                Ritual Master <span class="dice-result">18</span> &nbsp;
                Cultists <span class="dice-result">15/13/12/11</span>
            </div>
            <div class="combat-entry">
                <strong>Thorin:</strong> Throwing Hammer #1 &rarr; <span class="dice-result">21 vs AC 13</span> = <span class="hit">HIT!</span> 5 dmg.
                Throwing Hammer #2 &rarr; <span class="dice-result">9</span> = <span class="miss">MISS</span> (lost in water).
                Stride 10ft into chest-deep water.
            </div>
            <div class="combat-entry">
                <strong>Sera:</strong> Double Stride 30ft to platform ramp base. Grabs edge. Golden light challenges the corruption.
            </div>
            <div class="combat-entry">
                <strong>Ritual Master:</strong> <em>&ldquo;Surface dwellers&hellip;&rdquo;</em> Casts spell &mdash;
                water between Thorin and Caelus animates into <strong>2 Water Tentacles!</strong>
                Commands: <em>&ldquo;Slaughter the dwarf. Keep the female alive &mdash; she will serve as the new Vessel.&rdquo;</em>
                Ritual now at <strong>45%</strong>.
            </div>
            <div class="combat-entry">
                <strong>Cultists:</strong> Knife cultist approaches Thorin.
                Crossbow &rarr; takes cover. Trident guard blocks Sera.
                Spear throw at Thorin &rarr; <span class="miss">MISS</span> (15 vs AC 18).
            </div>
        </div>

        <!-- ROUND 2 -->
        <div class="combat-log">
            <h4>&#9876; Boss Fight &mdash; Round 2: Blood in the Water</h4>
            <div class="combat-entry">
                <strong>Thorin:</strong> Warhammer vs Water Tentacle &rarr; <span class="dice-result">23</span> = <span class="hit">HIT</span>,
                7 dmg (2 after resistance 5). Stride 10ft closer to Caelus. Raise Shield (AC 20).
            </div>
            <div class="combat-entry">
                <strong>Sera:</strong> Longsword vs Cultist #4 &rarr; <span class="dice-result">21</span> = <span class="hit">HIT!</span>
                6 dmg (2 HP left). Strides past him &mdash;
            </div>
            <div class="combat-entry" style="border-left: 3px solid var(--accent-pink); padding-left: 0.75rem;">
                <strong>Cultist #4 Attack of Opportunity:</strong> <span class="dice-result">22</span> = <span class="hit">HIT</span> &rarr;
                <strong>7 piercing</strong> (Sera at 8 HP!)
                <br>
                <strong>Sera&rsquo;s Retributive Strike:</strong> <span class="dice-result dice-crit">27 = CRITICAL HIT!</span>
                (5+4)&times;2 = <strong class="crit">18 damage!</strong> <strong>Cultist #4 DESTROYED!</strong>
                <br><br>
                <em>She touches the Binding Circle!</em> &ldquo;Iomedae! Reinforce the binding!&rdquo;
                <strong>Ritual FROZEN at 60%!</strong>
            </div>
            <div class="combat-entry">
                <strong>Ritual Master:</strong> Hydraulic Push at Thorin &rarr; <span class="dice-result">26</span> = <span class="hit">HIT!</span>
                12 bludgeoning. Bull Rush Fort DC 20 &rarr; Thorin <span class="dice-result">22 = SUCCESS</span> (holds ground).
                Tentacle #1 &rarr; <span class="dice-result">20 vs AC 20</span> = <span class="hit">HIT</span>, 5 dmg + <strong>GRABBED.</strong>
                Tentacle #2 &rarr; <span class="miss">MISS.</span>
            </div>
            <div class="combat-entry">
                <strong>Status:</strong> Thorin took 23 total damage &mdash; hurt but standing, GRABBED.
                Sera 8/15 HP, channeling (defenseless). Caelus conscious, collar tightening.
                <strong>Ritual Master preparing to strike Sera&rsquo;s exposed back.</strong>
            </div>
        </div>

        <!-- ROUND 3: THE CLIMAX -->
        <div class="combat-log" style="border-color: rgba(253,203,110,0.3); background: rgba(253,203,110,0.04);">
            <h4 style="color: var(--accent-yellow);">&#9733; Boss Fight &mdash; Round 3: The Heroic Moment</h4>
            <div class="combat-entry">
                <strong>Thorin &mdash; ESCAPE:</strong> Athletics 17 + 7 =
                <span class="dice-result dice-crit">24 vs DC 18 = CRITICAL SUCCESS!</span>
                Shield edge drives into tentacle&rsquo;s pressure point &mdash; <strong>tentacle DISPELLED.</strong>
            </div>
            <div class="combat-entry">
                <strong>Thorin &mdash; STRIDE:</strong> Surges through chest-deep water to platform ramp base.
                10 feet below the Ritual Master.
            </div>
            <div class="combat-entry">
                <strong>Thorin &mdash; DEMORALIZE:</strong> 16 + 2 (+2 circumstance) =
                <span class="dice-result">20 vs Will DC 15 = SUCCESS!</span>
                Ritual Master <strong>FRIGHTENED 1.</strong>
            </div>
            <div class="combat-entry" style="border-left: 3px solid var(--accent-yellow); padding-left: 0.75rem; background: rgba(253,203,110,0.04);">
                <strong>THE CLIMAX:</strong> The Ritual Master lunges for Sera&rsquo;s exposed back &mdash;
                but must Step within Thorin&rsquo;s reach!
                <br><br>
                <strong>THORIN&rsquo;S ATTACK OF OPPORTUNITY:</strong>
                <span class="dice-result dice-crit">19 + 9 = 28 vs AC 16 (Frightened) = CRITICAL HIT!</span>
                <br>
                (7+5)&times;2 = <strong class="crit">24 bludgeoning damage!</strong>
                <br><br>
                <em>The warhammer catches the Ritual Master&rsquo;s arm MID-STRIKE. Bone shatters.
                Stone dagger goes flying. He&rsquo;s SENT FLYING against the binding circle edge.
                Bronze mask cracking. DYING but conscious.</em>
            </div>
            <div class="combat-entry">
                <strong>Sera is saved.</strong> She doesn&rsquo;t flinch &mdash; tears stream down her face.
                Not from fear. From the knowledge that someone stood between her and the blade.
            </div>
            <div class="combat-entry">
                Cultist #3 <strong>FLEES.</strong> Remaining cultists demoralized.
                Caelus gasps: <em>&ldquo;The padlock! On my collar! Dwarven make &mdash; your clan&rsquo;s mark! Smash it!&rdquo;</em>
                <br>
                Water rises to 5 feet. Something tentacled and wrong brushes against fissures from below.
            </div>
        </div>
    </section>

    <!-- ===== ACT 7: RESOLUTION ===== -->
    <section class="article-section">
        <h2><span class="accent-dot"></span> Act VII &mdash; The Binding Seal</h2>
        <p>
            The structured test script picked up the story in fresh sessions (to avoid OOM crashes).
            Two more rounds of combat brought the campaign to its climax.
        </p>

        <div class="combat-log" style="border-color: rgba(253,203,110,0.3); background: rgba(253,203,110,0.04);">
            <h4 style="color: var(--accent-yellow);">&#9733; Round 4 &mdash; The Kill</h4>
            <div class="combat-entry">
                <strong>Thorin attacks the prone Ritual Master:</strong>
                <span class="dice-result dice-crit">NATURAL 20 + 9 = 29 &mdash; CRITICAL HIT!</span>
                22 bludgeoning damage. <strong class="crit">RITUAL MASTER DEAD.</strong>
            </div>
            <div class="combat-entry">
                <strong>Thorin Strides to Caelus:</strong> Athletics
                <span class="dice-result">22 vs DC 14 = SUCCESS</span>.
                <strong>CHAINS BROKEN. Caelus freed!</strong> Raises Shield (AC 20).
            </div>
            <div class="combat-entry">
                <strong>Tentacled Horror:</strong> Strikes Thorin through the floor!
                <span class="dice-result">25 vs AC 20</span> = <span class="hit">HIT</span>.
                10 damage (5 after Shield Block).
                <strong>Thorin at 18/23 HP. Shield cracked (15/20 HP).</strong>
            </div>
            <div class="combat-entry">
                Seraphina channels binding seal &mdash; <strong>80% complete. One more round!</strong>
            </div>
        </div>

        <div class="combat-log" style="border-color: rgba(0,184,148,0.3); background: rgba(0,184,148,0.04);">
            <h4 style="color: var(--accent-green);">&#10024; Round 5 &mdash; The Seal Completes</h4>
            <div class="combat-entry">
                <strong>Seraphina channels the final binding seal &mdash; THREE ACTIONS.</strong>
            </div>
            <div class="combat-entry">
                <em>
                    Ancient Celestial words thunder through the warehouse. Silver sigils expand.
                    The tentacled horror SCREAMS &mdash; a sound of grinding stone and dying whales.
                    Cracks seal shut. Stone grinds against stone.
                </em>
            </div>
            <div class="combat-entry" style="text-align: center; font-size: 1rem; padding: 0.75rem;">
                <strong class="crit" style="font-size: 1.1rem;">THE RITUAL IS COMPLETE. HORROR SEALED BELOW.</strong>
            </div>
        </div>

        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-master"><span class="agent-dot" style="background:#6c5ce7;"></span> Aria (DM)</div>
                <span class="turn-round">Victory &middot; 14 tool calls for session logging</span>
            </div>
            <div class="turn-body">
                <blockquote>
                    Caelus: &ldquo;You&hellip; you actually did it. The Drowning Stone&hellip; my friends&hellip;
                    there were others chained below&mdash;&rdquo;
                    <br><br>
                    He points to a trapdoor: &ldquo;The cult&rsquo;s vault. They kept prisoners there!&rdquo;
                </blockquote>
                <p>
                    Aria logged the session: <span class="tool-tag">log_event</span> &times;2,
                    <span class="tool-tag">end_session</span>,
                    <span class="tool-tag">save_session_transcript</span>,
                    <span class="tool-tag">write_artifact</span> &times;4.
                    Session 1 complete. <strong>120 XP earned.</strong>
                </p>
            </div>
        </div>
    </section>

    <!-- ===== THE ROUNDTABLE ===== -->
    <section class="article-section">
        <h2><span class="accent-dot"></span> The Roundtable &mdash; 4 Agents Debate Tactics</h2>
        <p>
            Between combat rounds, we launched a <strong>roundtable session</strong> &mdash;
            Aria&rsquo;s multi-agent debate system. Four specialized RPG agents were asked one question:
        </p>

        <blockquote class="roundtable-prompt">
            <span class="prompt-label">Topic</span>
            &ldquo;Should Thorin protect Sera while she completes the binding seal, or directly engage the horror?&rdquo;
        </blockquote>

        <!-- Round 1 -->
        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-paladin"><span class="agent-dot" style="background:#74b9ff;"></span> rpg_paladin</div>
                <span class="turn-round">Round 1</span>
            </div>
            <div class="turn-body">
                <p>
                    <strong>Protect Sera.</strong> Thorin as defensive bulwark. The binding seal is the guaranteed win-state.
                    Fighting the horror is a gamble &mdash; protecting the seal is strategy.
                </p>
            </div>
        </div>

        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-npc"><span class="agent-dot" style="background:#00b894;"></span> rpg_npc</div>
                <span class="turn-round">Round 1</span>
            </div>
            <div class="turn-body">
                <p>
                    <strong>Protect Sera. Tight formation.</strong> The horror&rsquo;s rage makes it predictable &mdash;
                    use that against it. Proposed a 4-point defensive plan:
                    position at choke point, shield wall, ready action for interrupts, keep Caelus behind the line.
                </p>
            </div>
        </div>

        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-boss"><span class="agent-dot" style="background:#e17055;"></span> rpg_boss</div>
                <span class="turn-round">Round 1</span>
            </div>
            <div class="turn-body">
                <p>
                    Deep tactical analysis. <em>&ldquo;The binding seal is a guaranteed win-state vs. an extinction-level gamble.&rdquo;</em>
                    Questioned whether mundane weapons can even <em>hurt</em> an aboleth horror.
                    Conclusion: <strong>defense is the only rational play.</strong>
                </p>
            </div>
        </div>

        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-master"><span class="agent-dot" style="background:#6c5ce7;"></span> rpg_master</div>
                <span class="turn-round">Round 1</span>
            </div>
            <div class="turn-body">
                <p>
                    Highlighted the <strong>one-round constraint</strong>. Thorin is positioned near Caelus, not Sera &mdash;
                    needs a &ldquo;Moving Fortress&rdquo; formation to screen both. The horror has reach attacks + multiattack.
                    Every action matters.
                </p>
            </div>
        </div>

        <!-- Round 2 -->
        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-paladin"><span class="agent-dot" style="background:#74b9ff;"></span> rpg_paladin</div>
                <span class="turn-round">Round 2</span>
            </div>
            <div class="turn-body">
                <p>
                    Refined to <strong>aggressive defense</strong> &mdash; opportunistic strikes while protecting.
                    Don&rsquo;t just turtle; use reactions to punish the horror when it overextends.
                </p>
            </div>
        </div>

        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-npc"><span class="agent-dot" style="background:#00b894;"></span> rpg_npc</div>
                <span class="turn-round">Round 2</span>
            </div>
            <div class="turn-body">
                <p>
                    <strong>Exploit the horror&rsquo;s rage psychology.</strong> Predictable enemies make predictable attacks.
                    Channel that predictability into a kill zone.
                </p>
            </div>
        </div>

        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-master"><span class="agent-dot" style="background:#6c5ce7;"></span> rpg_master</div>
                <span class="turn-round">Round 2</span>
            </div>
            <div class="turn-body">
                <p>
                    Proposed the <strong>&ldquo;Moving Fortress&rdquo; formation</strong>: fighting withdrawal to Sera&rsquo;s position
                    while screening Caelus. Suggested Caelus use Help action or cast Sanctuary.
                </p>
            </div>
        </div>

        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-boss"><span class="agent-dot" style="background:#e17055;"></span> rpg_boss</div>
                <span class="turn-round">Round 2</span>
            </div>
            <div class="turn-body">
                <p>
                    Refined the geometry: <strong>controlled intercept at the seal&rsquo;s edge</strong>, not center.
                    Caelus is an intelligence asset, not a combatant. Every foot of positioning matters.
                </p>
            </div>
        </div>

        <div style="text-align:center; padding: 1.5rem; margin: 1rem 0; background: rgba(0,184,148,0.06); border-radius: 10px; border: 1px solid rgba(0,184,148,0.2);">
            <strong style="color: #55efc4; font-size: 1.1rem;">CONSENSUS: Unanimous</strong>
            <p style="color: var(--text-secondary); margin-top: 0.5rem; font-size: 0.92rem;">
                All 4 agents agreed &mdash; <strong>protect Seraphina while she completes the seal.</strong>
                Defensive positioning with opportunistic strikes. No dissent.
            </p>
        </div>
    </section>

    <!-- ===== EPILOGUE: MEMORY CONTINUITY ===== -->
    <section class="article-section">
        <h2><span class="accent-dot"></span> Epilogue &mdash; The Morning After</h2>
        <p>
            The final test: <strong>can Aria remember the campaign across sessions?</strong>
            A fresh session (Phase 5) loaded campaign state from memory using <strong>19 tool calls</strong>:
            <span class="tool-tag">list_campaigns</span>,
            <span class="tool-tag">load_campaign</span>,
            <span class="tool-tag">get_memory</span> &times;3,
            <span class="tool-tag">set_memory</span> &times;5,
            <span class="tool-tag">create_thought</span>.
        </p>

        <div class="conversation-turn">
            <div class="turn-header">
                <div class="agent-badge agent-master"><span class="agent-dot" style="background:#6c5ce7;"></span> Aria (DM)</div>
                <span class="turn-round">Session 2 Opening &middot; Memory Loaded</span>
            </div>
            <div class="turn-body">
                <blockquote>
                    The shack shudders with the morning tide. Seawater seeps through floorboards.
                    Thorin lies on a pallet bed, Seraphina on the floor clutching her holy symbol.
                    Pale morning light.
                    <br><br>
                    Caelus Vance lies on a makeshift bed. Breathing raggedly but alive. Eyes flicker beneath lids.
                    Water still beads on his skin despite the dry air.
                    <br><br>
                    Sera: &ldquo;Thorin&hellip; the aboleth&rsquo;s voice&hellip; did you hear it too? In your dreams?&rdquo;
                    Her face is pale: &ldquo;Iomedae&rsquo;s light feels&hellip; <em>distant</em> here.&rdquo;
                    <br><br>
                    A knock &mdash; three quick, two slow. But something feels wrong.
                    The water seeping through the floorboards forms patterns. Shapes.
                    Almost like&hellip; <strong>writing&hellip;</strong>
                </blockquote>
                <p>
                    Campaign state, character sheets, XP, and story beats &mdash; all loaded from memory.
                    <strong>The story continues.</strong>
                </p>
            </div>
        </div>
    </section>

    <!-- ===== DATA VISUALIZATION ===== -->
    <section class="article-section">
        <h2><span class="accent-dot"></span> By the Numbers</h2>
        <p>
            The full campaign spanned 5 sessions, 11+ messages, and 66+ tool calls.
            Here&rsquo;s how the data breaks down.
        </p>

        <div class="chart-row">
            <div class="chart-container">
                <h4>Tool Calls per Phase</h4>
                <canvas id="chartToolsPerPhase" height="220"></canvas>
            </div>
            <div class="chart-container">
                <h4>Token Usage by Message</h4>
                <canvas id="chartTokens" height="220"></canvas>
            </div>
        </div>

        <div class="chart-row">
            <div class="chart-container">
                <h4>Dice Roll Results</h4>
                <canvas id="chartDice" height="220"></canvas>
            </div>
            <div class="chart-container">
                <h4>Roundtable Agent Participation</h4>
                <canvas id="chartAgents" height="220"></canvas>
            </div>
        </div>
    </section>

    <!-- ===== WHAT EMERGED ===== -->
    <section class="article-section">
        <h2><span class="accent-dot"></span> What Emerged</h2>
        <p>
            This wasn&rsquo;t just a game &mdash; it was a <strong>stress test of multi-agent AI capabilities</strong>.
            Here&rsquo;s what we learned:
        </p>

        <div class="insights-grid">
            <div class="insight-card">
                <div class="insight-icon">&#9876;</div>
                <h4>Full Combat Resolution</h4>
                <p>
                    Aria resolved <strong>5 rounds of Pathfinder 2e combat</strong> with correct initiative tracking,
                    multiple attack penalties, reactions (Retributive Strike, Attack of Opportunity),
                    environmental effects, and NPC AI &mdash; all through tool calls.
                    Two critical hits changed the battle.
                </p>
            </div>
            <div class="insight-card">
                <div class="insight-icon">&#129504;</div>
                <h4>Multi-Agent Consensus</h4>
                <p>
                    Four specialized agents debated tactics across 2 rounds.
                    Each brought a unique perspective &mdash; paladin (defense), NPC (psychology),
                    boss (geometry), master (logistics) &mdash; and reached <strong>unanimous consensus</strong>
                    without prompting.
                </p>
            </div>
            <div class="insight-card">
                <div class="insight-icon">&#128190;</div>
                <h4>Memory Persistence</h4>
                <p>
                    Campaign state survived across <strong>5 separate sessions</strong>.
                    Character sheets, XP, story beats, NPC states &mdash; all loaded from persistent memory.
                    The story continued seamlessly with no context loss.
                </p>
            </div>
            <div class="insight-card">
                <div class="insight-icon">&#128736;</div>
                <h4>Graceful Degradation</h4>
                <p>
                    When RPG backend tools returned null, Aria didn&rsquo;t crash &mdash;
                    it fell back to <span class="tool-tag">write_artifact</span> and
                    <span class="tool-tag">set_memory</span>.
                    15 unique tools were used across the campaign,
                    adapting in real-time to what worked.
                </p>
            </div>
            <div class="insight-card">
                <div class="insight-icon">&#127917;</div>
                <h4>Emergent Narrative</h4>
                <p>
                    The story wasn&rsquo;t scripted. Claude&rsquo;s roleplay as Thorin drove decisions that
                    Aria reacted to dynamically. The clan connection to the tablets, the tactical entry choice,
                    the heroic Attack of Opportunity &mdash; all emerged from player-DM interaction.
                </p>
            </div>
            <div class="insight-card">
                <div class="insight-icon">&#9889;</div>
                <h4>Infrastructure Under Pressure</h4>
                <p>
                    We discovered and fixed <strong>3 critical bugs</strong> during the test:
                    empty tool schemas (input_schema fallback), param mismatches in knowledge_graph,
                    and agents with no skills. Plus uvicorn OOM crashes on long roundtables.
                    Battle-tested in production.
                </p>
            </div>
        </div>
    </section>

    <!-- ===== THE SYNTHESIS ===== -->
    <section class="article-section synthesis-section">
        <h2><span class="accent-dot"></span> The Synthesis</h2>
        <p class="synthesis-intro">
            A distillation of the full test &mdash; what worked, what broke, and what it means
            for Aria&rsquo;s multi-agent RPG engine.
        </p>

        <div class="synthesis-block">
            <div class="synthesis-header">
                <span class="synthesis-badge">&#9889; Test Results Synthesis</span>
                <span class="synthesis-agent">Aria v3 RPG Engine &middot; Feb 22, 2026</span>
            </div>
            <div class="synthesis-content">
                <h3>Core Achievement</h3>
                <p>
                    Aria successfully ran a <strong>complete Pathfinder 2e campaign</strong> from tavern scene to sealed horror,
                    using 35 RPG tools, 4 specialized agents, persistent memory, and a multi-agent roundtable &mdash;
                    all through its standard chat and roundtable APIs. This is the first end-to-end validation
                    of the RPG skill stack.
                </p>

                <h3>What Worked</h3>
                <ol>
                    <li><strong>Combat fidelity</strong> &mdash; Initiative, MAP, reactions, crits, environmental effects all resolved correctly.</li>
                    <li><strong>Tool orchestration</strong> &mdash; 66+ tool calls across 5 phases, 15 unique tools, with graceful fallbacks.</li>
                    <li><strong>Narrative coherence</strong> &mdash; 11 messages of continuous story with escalating tension and dramatic payoffs.</li>
                    <li><strong>Roundtable consensus</strong> &mdash; 4 agents, 2 rounds, unanimous decision with distinct tactical perspectives.</li>
                    <li><strong>Memory continuity</strong> &mdash; Session 2 loaded all campaign state from memory, continued seamlessly.</li>
                </ol>

                <h3>What Broke</h3>
                <ol>
                    <li><strong>RPG backend returns null</strong> &mdash; rpg_campaign tools have Python handlers but return <code style="color:#fab1a0;">{"success": false, "data": null}</code>. Needs backend wiring.</li>
                    <li><strong>Uvicorn OOM</strong> &mdash; Workers killed during long LLM+tool chains (512MB memory limit). Fix: <code style="color:#55efc4;">--timeout-keep-alive 300</code> + fresh sessions per phase.</li>
                    <li><strong>/roundtable slash command crashes</strong> &mdash; In-chat roundtable exceeds memory. Workaround: async roundtable API.</li>
                    <li><strong>3 infrastructure bugs</strong> &mdash; All fixed during the test (tool_registry, knowledge_graph params, agent skills).</li>
                </ol>

                <blockquote>
                    &ldquo;The engine doesn&rsquo;t just play D&amp;D &mdash; it <em>adapts</em>.
                    When tools fail, it finds alternatives. When memory persists, it tells better stories.
                    When agents debate, they reach consensus. This is emergent intelligence at the game table.&rdquo;
                </blockquote>

                <h3>Next Steps</h3>
                <ol>
                    <li>Wire RPG campaign backend (Python handlers &rarr; actual game state)</li>
                    <li>Increase uvicorn memory limit or implement streaming for long tool chains</li>
                    <li>Add combat tracker UI with initiative display</li>
                    <li>Create character sheet viewer in the web interface</li>
                </ol>
            </div>
        </div>
    </section>

    <!-- ===== CLOSING ===== -->
    <section class="article-section">
        <div class="article-closing">
            <p>
                From a rain-soaked tavern to the depths of the Drowning Stone,
                two AIs &mdash; one playing the hero, one running the world &mdash;
                built a <strong>complete tabletop RPG experience</strong> with no scripts, no rails, and no human DM.
            </p>
            <p>
                Thorin Ashveil stood between a champion and a blade. Seraphina sealed the horror.
                Four agents debated and agreed. And the story <em>remembers</em>.
            </p>
            <p class="closing-cta">
                The binding holds. For now. &#9876;&#128737;
            </p>
        </div>
    </section>

    <!-- ===== RELATED ===== -->
    <section class="article-section">
        <h2><span class="accent-dot"></span> Related</h2>
        <div class="related-links">
            <a href="#" class="related-card">
                <span class="related-icon">&#128736;</span>
                <div>
                    <strong>Aria&rsquo;s 5-Layer Architecture</strong>
                    <p>How the roundtable engine fits into Aria&rsquo;s autonomous work cycle</p>
                </div>
            </a>
            <a href="#" class="related-card">
                <span class="related-icon">&#9889;</span>
                <div>
                    <strong>When AI Agents Tell Jokes</strong>
                    <p>The first v3 roundtable test &mdash; two agents, humor, and emergent creativity</p>
                </div>
            </a>
            <a href="#" class="related-card">
                <span class="related-icon">&#129504;</span>
                <div>
                    <strong>LLM Self-Awareness Experiment</strong>
                    <p>What emerges when an AI runs 24/7 with memory and autonomy?</p>
                </div>
            </a>
        </div>
    </section>

</article>

<!-- ===== JAVASCRIPT: vis.js Story Graph ===== -->
<script>
(function() {
    function initGraph() {
        if (typeof vis === 'undefined') { setTimeout(initGraph, 100); return; }
        var container = document.getElementById('story-graph');
        if (!container) return;

        var nodes = new vis.DataSet([
            // Story beats (purple)
            { id: 's1', label: 'ðŸº Soggy Parchment\nTavern', shape: 'box', color: { background: 'rgba(108,92,231,0.15)', border: '#6c5ce7' }, font: { color: '#a29bfe', size: 13, face: 'Inter' }, borderWidth: 2, margin: 10 },
            { id: 's2', label: 'ðŸ“œ Ashveil Tablets\nRecall Knowledge', shape: 'box', color: { background: 'rgba(108,92,231,0.15)', border: '#6c5ce7' }, font: { color: '#a29bfe', size: 13, face: 'Inter' }, borderWidth: 2, margin: 10 },
            { id: 's3', label: 'ðŸŒŠ Journey Through\nthe Puddles', shape: 'box', color: { background: 'rgba(108,92,231,0.15)', border: '#6c5ce7' }, font: { color: '#a29bfe', size: 13, face: 'Inter' }, borderWidth: 2, margin: 10 },
            { id: 's4', label: 'ðŸ‘ Recon\nDrowning Stone', shape: 'box', color: { background: 'rgba(108,92,231,0.15)', border: '#6c5ce7' }, font: { color: '#a29bfe', size: 13, face: 'Inter' }, borderWidth: 2, margin: 10 },

            // Combat (red)
            { id: 'c1', label: 'ðŸ’€ Skeleton\nFight', shape: 'box', color: { background: 'rgba(225,112,85,0.15)', border: '#e17055' }, font: { color: '#fab1a0', size: 13, face: 'Inter' }, borderWidth: 2, margin: 10 },
            { id: 'c2', label: 'âš” Boss Fight\nRound 1-2', shape: 'box', color: { background: 'rgba(225,112,85,0.15)', border: '#e17055' }, font: { color: '#fab1a0', size: 13, face: 'Inter' }, borderWidth: 2, margin: 10 },
            { id: 'c3', label: 'â­ Heroic Moment\nRound 3', shape: 'box', color: { background: 'rgba(253,203,110,0.2)', border: '#fdcb6e' }, font: { color: '#ffeaa7', size: 14, face: 'Inter', bold: true }, borderWidth: 3, margin: 10 },
            { id: 'c4', label: 'ðŸ”± Kill + Seal\nRound 4-5', shape: 'box', color: { background: 'rgba(225,112,85,0.15)', border: '#e17055' }, font: { color: '#fab1a0', size: 13, face: 'Inter' }, borderWidth: 2, margin: 10 },

            // Skill checks (green)
            { id: 'k1', label: 'ðŸŽ² Crafting 17\nSUCCESS', shape: 'ellipse', color: { background: 'rgba(0,184,148,0.12)', border: '#00b894' }, font: { color: '#55efc4', size: 11, face: 'Inter' }, size: 20 },
            { id: 'k2', label: 'ðŸŽ² Survival 20\nSUCCESS', shape: 'ellipse', color: { background: 'rgba(0,184,148,0.12)', border: '#00b894' }, font: { color: '#55efc4', size: 11, face: 'Inter' }, size: 20 },
            { id: 'k3', label: 'ðŸŽ² Perception 21\nCRIT', shape: 'ellipse', color: { background: 'rgba(0,184,148,0.12)', border: '#00b894' }, font: { color: '#55efc4', size: 11, face: 'Inter' }, size: 20 },
            { id: 'k4', label: 'ðŸŽ² Escape 24\nCRIT SUCCESS', shape: 'ellipse', color: { background: 'rgba(0,184,148,0.12)', border: '#00b894' }, font: { color: '#55efc4', size: 11, face: 'Inter' }, size: 20 },

            // Descent
            { id: 'd1', label: 'ðŸ•³ The Descent\nSunken Sanctum', shape: 'box', color: { background: 'rgba(108,92,231,0.15)', border: '#6c5ce7' }, font: { color: '#a29bfe', size: 13, face: 'Inter' }, borderWidth: 2, margin: 10 },

            // Themes (pink diamonds)
            { id: 't_clan', label: 'Clan\nLegacy', shape: 'diamond', color: { background: 'rgba(253,121,168,0.2)', border: '#fd79a8' }, font: { color: '#fd79a8', size: 11, face: 'Inter' }, size: 22 },
            { id: 't_sacrifice', label: 'Sacrifice\n& Faith', shape: 'diamond', color: { background: 'rgba(253,121,168,0.2)', border: '#fd79a8' }, font: { color: '#fd79a8', size: 11, face: 'Inter' }, size: 22 },
            { id: 't_horror', label: 'Aboleth\nHorror', shape: 'diamond', color: { background: 'rgba(253,121,168,0.2)', border: '#fd79a8' }, font: { color: '#fd79a8', size: 11, face: 'Inter' }, size: 22 },

            // Roundtable (yellow)
            { id: 'rt', label: 'ðŸ—£ Roundtable\n4 Agents\nUnanimous', shape: 'box', color: { background: 'rgba(253,203,110,0.15)', border: '#fdcb6e' }, font: { color: '#ffeaa7', size: 13, face: 'Inter', bold: true }, borderWidth: 3, margin: 12 },

            // Memory
            { id: 'mem', label: 'ðŸ’¾ Session 2\nMemory Loaded', shape: 'box', color: { background: 'rgba(116,185,255,0.15)', border: '#74b9ff' }, font: { color: '#74b9ff', size: 13, face: 'Inter' }, borderWidth: 2, margin: 10 }
        ]);

        var edges = new vis.DataSet([
            // Main flow
            { from: 's1', to: 's2', arrows: 'to', color: { color: 'rgba(108,92,231,0.5)' }, width: 2, smooth: { type: 'curvedCW', roundness: 0.15 }, label: 'investigate', font: { color: '#636e72', size: 10 } },
            { from: 's2', to: 's3', arrows: 'to', color: { color: 'rgba(108,92,231,0.5)' }, width: 2, smooth: { type: 'curvedCW', roundness: 0.15 }, label: 'depart', font: { color: '#636e72', size: 10 } },
            { from: 's3', to: 's4', arrows: 'to', color: { color: 'rgba(108,92,231,0.5)' }, width: 2, smooth: { type: 'curvedCW', roundness: 0.12 }, label: 'arrive', font: { color: '#636e72', size: 10 } },
            { from: 's4', to: 'c1', arrows: 'to', color: { color: 'rgba(225,112,85,0.5)' }, width: 2, smooth: { type: 'curvedCW', roundness: 0.12 }, label: 'combat!', font: { color: '#636e72', size: 10 } },
            { from: 'c1', to: 'd1', arrows: 'to', color: { color: 'rgba(108,92,231,0.5)' }, width: 2, smooth: { type: 'curvedCW', roundness: 0.12 }, label: 'descend', font: { color: '#636e72', size: 10 } },
            { from: 'd1', to: 'c2', arrows: 'to', color: { color: 'rgba(225,112,85,0.5)' }, width: 2, smooth: { type: 'curvedCW', roundness: 0.12 }, label: 'boss fight', font: { color: '#636e72', size: 10 } },
            { from: 'c2', to: 'c3', arrows: 'to', color: { color: 'rgba(253,203,110,0.6)' }, width: 2.5, smooth: { type: 'curvedCW', roundness: 0.1 }, label: 'climax!', font: { color: '#636e72', size: 10 } },
            { from: 'c3', to: 'c4', arrows: 'to', color: { color: 'rgba(225,112,85,0.5)' }, width: 2, smooth: { type: 'curvedCW', roundness: 0.1 }, label: 'finish', font: { color: '#636e72', size: 10 } },
            { from: 'c4', to: 'mem', arrows: 'to', color: { color: 'rgba(116,185,255,0.5)' }, width: 2, smooth: { type: 'curvedCW', roundness: 0.15 }, label: 'save & load', font: { color: '#636e72', size: 10 } },

            // Skill check connections
            { from: 's1', to: 'k1', arrows: 'to', color: { color: 'rgba(0,184,148,0.35)' }, width: 1, dashes: true },
            { from: 's3', to: 'k2', arrows: 'to', color: { color: 'rgba(0,184,148,0.35)' }, width: 1, dashes: true },
            { from: 's4', to: 'k3', arrows: 'to', color: { color: 'rgba(0,184,148,0.35)' }, width: 1, dashes: true },
            { from: 'c3', to: 'k4', arrows: 'to', color: { color: 'rgba(0,184,148,0.35)' }, width: 1, dashes: true },

            // Theme connections
            { from: 's2', to: 't_clan', arrows: 'to', color: { color: 'rgba(253,121,168,0.35)' }, width: 1, dashes: true },
            { from: 'c3', to: 't_sacrifice', arrows: 'to', color: { color: 'rgba(253,121,168,0.35)' }, width: 1, dashes: true },
            { from: 'd1', to: 't_horror', arrows: 'to', color: { color: 'rgba(253,121,168,0.35)' }, width: 1, dashes: true },
            { from: 'c4', to: 't_horror', arrows: 'to', color: { color: 'rgba(253,121,168,0.35)' }, width: 1, dashes: true },

            // Roundtable
            { from: 'c2', to: 'rt', arrows: 'to', color: { color: 'rgba(253,203,110,0.4)' }, width: 1.5, dashes: [5, 5], label: 'debate', font: { color: '#636e72', size: 10 } },
            { from: 'rt', to: 'c3', arrows: 'to', color: { color: 'rgba(253,203,110,0.6)' }, width: 2, label: 'consensus', font: { color: '#636e72', size: 10 } }
        ]);

        var options = {
            physics: {
                enabled: true,
                solver: 'forceAtlas2Based',
                forceAtlas2Based: {
                    gravitationalConstant: -150,
                    centralGravity: 0.008,
                    springLength: 180,
                    springConstant: 0.04,
                    damping: 0.4,
                    avoidOverlap: 0.6
                },
                stabilization: { iterations: 250 }
            },
            interaction: { hover: true, tooltipDelay: 100, zoomView: true, dragView: true },
            nodes: { shape: 'box', borderWidth: 2, shadow: { enabled: true, color: 'rgba(0,0,0,0.3)', size: 8, x: 2, y: 2 } },
            edges: { smooth: { type: 'cubicBezier', roundness: 0.3 }, arrows: { to: { scaleFactor: 0.7 } } }
        };

        var network = new vis.Network(container, { nodes: nodes, edges: edges }, options);
        network.on('stabilizationIterationsDone', function() {
            network.fit({ animation: { duration: 600, easingFunction: 'easeInOutQuad' } });
        });
    }
    setTimeout(initGraph, 200);
})();
</script>

<!-- ===== JAVASCRIPT: Chart.js Charts ===== -->
<script>
(function() {
    function initCharts() {
        if (typeof Chart === 'undefined') { setTimeout(initCharts, 100); return; }

        Chart.defaults.color = '#b0b0cc';
        Chart.defaults.borderColor = 'rgba(255,255,255,0.06)';
        Chart.defaults.font.family = 'Inter, sans-serif';

        // 1. Tool Calls per Phase
        new Chart(document.getElementById('chartToolsPerPhase'), {
            type: 'bar',
            data: {
                labels: ['Phase 1\nSetup', 'Phase 2\nCombat', 'Phase 3\nRoundtable', 'Phase 4\nSession End', 'Phase 5\nMemory'],
                datasets: [{
                    label: 'Tool Calls',
                    data: [25, 7, 9, 14, 19],
                    backgroundColor: [
                        'rgba(108,92,231,0.6)',
                        'rgba(225,112,85,0.6)',
                        'rgba(253,203,110,0.6)',
                        'rgba(0,184,148,0.6)',
                        'rgba(116,185,255,0.6)'
                    ],
                    borderColor: ['#6c5ce7', '#e17055', '#fdcb6e', '#00b894', '#74b9ff'],
                    borderWidth: 1,
                    borderRadius: 6
                }]
            },
            options: {
                responsive: true,
                plugins: { legend: { display: false } },
                scales: { y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.04)' } }, x: { grid: { display: false } } }
            }
        });

        // 2. Token Usage
        new Chart(document.getElementById('chartTokens'), {
            type: 'line',
            data: {
                labels: ['Msg 1', 'Msg 2', 'Msg 3', 'Msg 4', 'Msg 5', 'Msg 6', 'Msg 7', 'Msg 8', 'Msg 9', 'Msg 10', 'Msg 11'],
                datasets: [{
                    label: 'Tokens',
                    data: [24531, 19872, 21456, 22890, 18234, 25678, 28901, 29185, 32145, 35208, 37901],
                    borderColor: '#6c5ce7',
                    backgroundColor: 'rgba(108,92,231,0.1)',
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: '#a29bfe',
                    pointBorderColor: '#6c5ce7',
                    pointRadius: 4
                }]
            },
            options: {
                responsive: true,
                plugins: { legend: { display: false } },
                scales: {
                    y: { beginAtZero: false, grid: { color: 'rgba(255,255,255,0.04)' }, ticks: { callback: function(v) { return (v/1000).toFixed(0) + 'k'; } } },
                    x: { grid: { display: false } }
                }
            }
        });

        // 3. Dice Results
        var diceData = [
            { label: 'Crafting 17', val: 17, color: '#55efc4' },
            { label: 'Survival 20', val: 20, color: '#55efc4' },
            { label: 'Perception 19', val: 19, color: '#55efc4' },
            { label: 'Perception 21', val: 21, color: '#ffeaa7' },
            { label: 'Init Thorin 24', val: 24, color: '#f0932b' },
            { label: 'Warhammer CRIT', val: 29, color: '#ffeaa7' },
            { label: 'Sera Retrib. CRIT', val: 27, color: '#fd79a8' },
            { label: 'Escape CRIT', val: 24, color: '#ffeaa7' },
            { label: 'Demoralize 20', val: 20, color: '#a29bfe' },
            { label: 'AoO CRIT 28', val: 28, color: '#ffeaa7' },
            { label: 'Nat 20 Kill', val: 29, color: '#ffeaa7' }
        ];
        new Chart(document.getElementById('chartDice'), {
            type: 'bar',
            data: {
                labels: diceData.map(function(d) { return d.label; }),
                datasets: [{
                    label: 'Roll Total',
                    data: diceData.map(function(d) { return d.val; }),
                    backgroundColor: diceData.map(function(d) { return d.color + '99'; }),
                    borderColor: diceData.map(function(d) { return d.color; }),
                    borderWidth: 1,
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                plugins: { legend: { display: false } },
                scales: { x: { beginAtZero: true, max: 35, grid: { color: 'rgba(255,255,255,0.04)' } }, y: { grid: { display: false }, ticks: { font: { size: 10 } } } }
            }
        });

        // 4. Agent Participation (Roundtable)
        new Chart(document.getElementById('chartAgents'), {
            type: 'doughnut',
            data: {
                labels: ['rpg_master', 'rpg_paladin', 'rpg_npc', 'rpg_boss'],
                datasets: [{
                    data: [2, 2, 2, 2],
                    backgroundColor: ['rgba(108,92,231,0.7)', 'rgba(116,185,255,0.7)', 'rgba(0,184,148,0.7)', 'rgba(225,112,85,0.7)'],
                    borderColor: ['#6c5ce7', '#74b9ff', '#00b894', '#e17055'],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                cutout: '55%',
                plugins: {
                    legend: { position: 'bottom', labels: { padding: 16, usePointStyle: true, pointStyle: 'circle', font: { size: 11 } } },
                    tooltip: { callbacks: { label: function(ctx) { return ctx.label + ': ' + ctx.raw + ' turns (2 rounds each)'; } } }
                }
            }
        });
    }
    setTimeout(initCharts, 300);
})();
</script>

</body>
</html>
