# Aria Souvenir — 2026-02-22 🗓️

> **Sprint: v3 Post-Launch Health Sprint**
> Date: Sunday 22 February 2026
> Format: Scrum Master (GitHub Copilot) × Aria as Product Owner
> All 10 roundtable sessions are **live on production** — view them at `https://192.168.1.53/chat/<id>`

---

## The Trigger — Shiva's Observation

Shiva opened chat session `7d4953a6-beda-4d9c-b9dc-6f77614bde3b` (0 messages, ghost).
He noticed:
- The session list is cluttered with **ghost sessions** (0 messages, never used)
- Only **kimi** responding — other agent personas completely absent
- Sessions never reaching archive — archive table 100% empty
- Cron sessions (88 out of 94) flooding the DB — no type-specific TTL
- No quick mini-roundtable from chat interface
- No agent or model badges on messages — Aria is a "black box"

---

## Live Production Audit — Real Numbers

Ran `live_audit.py` via SSH on Mac Mini (`najia@192.168.1.53`):

```
Total sessions:    94
  cron:            88   <- 94% of all sessions!
  interactive:      4
  roundtable:       2

Agents active:   aria (92 sessions), roundtable (2 sessions)
Ghost sessions:  2  (7d4953a6 + 6b0daab2)
Archive table:   EMPTY
Engine agents:   6 registered, all with blank display IDs
```

---

## Roundtable — 10 Live Sessions with Aria as PO

All sessions ran on production via `talk_to_aria.py`. Aria model: `kimi`.

---

### RT-01 · Ghost Sessions | `b42a97a4-6509-49b9-b813-c596696f2636`

**SM asked:** Ghost sessions (0 messages) survive 30 days. What TTL and cleanup strategy?

**Aria said:**
> "Ghost TTL: 1 hour (not 15 min — too aggressive for slow typers)"
> "Policy: <1h keep, 1-24h soft-delete (status=expired), >24h hard delete"
> "Fix now: cleanup_ghost_sessions() cron (15-min interval, message_count=0 AND created_at < NOW()-1h)"
> "Next sprint: Lazy session creation — dont create DB row until first message"

**Status:** DONE — ghost TTL updated to 60 min, background loop runs every 10 min.

---

### RT-02 · Cron Session Pollution | `f8e516f5-fb95-4483-8f6c-36d81ddc66af`

**SM asked:** 88/94 sessions are cron type. They flood the sidebar. What should the TTL be?

**Aria said:**
> "YES hide cron sessions from /chat sidebar by default"
> "Filter: session_type IN ('interactive', 'roundtable') in sidebar"
> "Cron TTL: 7 days (not 24h — need window for debugging)"
> "Build /operations dashboard for cron reports"

**Status:** DONE — sidebar already filters cron via showAgentSessions toggle. Added prune_sessions_by_type('cron', days=7) background task.

---

### RT-03 · Agent Diversity Gap | `ee3a40bd-f076-42d2-92fd-f352cb585c49`

**SM asked:** Only `aria` agent is running. aria-analyst/coder/creative/talk = 0 sessions.

**Aria said:**
> "Confirmed gap — delegation system architected but not operational"
> "I want: agent picker in UI + task-type detection in Cognition.process()"
> "Support both direct selection AND auto-delegation (Option C)"

**Status:** BACKLOG — P1.

---

### RT-04 · Archive Table Empty | `995cd843-60b3-41ce-a8b1-3afbeadc2925`

**SM asked:** Archive endpoint only soft-deletes. Physical archive table is 100% empty.

**Aria said:**
> "Two-phase archive: copy to EngineChatSessionArchive + 7-day grace + hard delete"
> "Add Archived Sessions browsable tab with Restore/View/Delete actions"
> "This is P0"

**Status:** DONE — archive endpoint calls archive_session() which physically copies to archive tables. UI tab is backlog.

---

### RT-05 · Pruning TTLs | `21ffeafe-55a2-43a8-85ed-0d77d4bdd48d`

**SM asked:** Current TTL is 30 days for everything. What should each type be?

**Aria's exact TTLs:**
> "Cron: 24 hours"
> "Ghost (0 messages): 15 minutes"
> "Interactive: 30 days (keep current)"

**Note:** Conflict with RT-01 (ghost=1h). RT-01 reasoning wins (prevents data anxiety). Cron TTL set to 7 days per RT-02 (debug window).

**Status:** DONE — ghost=60min, cron=7days, interactive=30days.

---

### RT-06 · Agent Visibility in Chat | `9f82fe07-cbf3-4641-8da7-f09b1e27a16c`

**SM asked:** No agent selector, no model badge on messages. Aria is a black box.

**Aria said:**
> "Every assistant message MUST show: Agent badge + Model badge"
> "Trust: Shiva needs to know if security advice came from devops or casual aria_talk"
> "Agent selector: Auto / DevSecOps / Analyst / Creator / Chat"
> "Right now Aria is a black box — that's against our value of honesty"

**Status:** DONE — model badge injected into message header on stream_end. Full agent selector is backlog.

---

### RT-07 · Quick /rt Roundtable | `07925214-8234-4c05-89a7-24a56391b68c`

**SM asked:** Shiva wants a small roundtable from chat. Current /roundtable page is too heavy.

**Aria said:**
> "/rt [@agent1 @agent2 ...] <question> — slash command triggers quick roundtable"
> "Max 3 agents, 1 round only, 30s timeout, parallel async execution"
> "Auto-select 2 agents via keyword matching if no @mentions"
> "Synthesis shown first, per-agent responses capped at 200 chars"
> "Persisted to chat history so Shiva can scroll back"

**Status:** BACKLOG — spec complete, implementation is a sprint item.

---

### RT-08 · Session Titles are UUIDs | `8b3c3a6c-bd88-4576-aa89-6c6eb3e208fd`

**SM asked:** Sessions show UUID titles. LLM titling takes 3-5s.

**Aria said:**
> "Immediate sync titling: first 8 words truncated — instant, no LLM delay"
> "Progressive enhancement: async LLM refines later without visible jank"
> "Ghost: has message = 8 words; empty <5min = New session + timestamp; empty >24h = Untitled (faded)"

**Status:** DONE — autoGenerateTitle() + PATCH /sessions/{id}/title already implemented.

---

### RT-09 · Model Picker Missing | `1fe38a9f-e0a2-4fb8-aaaf-67e068994e95`

**SM asked:** models.yaml has 22 models with friendly names but chat UI shows none.

**Aria said:**
> "Agent-first selection (Auto default), model picker behind Advanced toggle"
> "Persist agent selection (localStorage aria.chat.lastAgent), reset model override per session"
> "Anti-patterns: model-first UI, persisting cost-bearing choices, flat list of 22 models"

**Status:** BACKLOG — agent selector spec complete (RT-06 + RT-09 combined).

---

### RT-10 · Morning Brief | `10e27cd8-4d42-4ab3-bd8c-a357965e97b1`

**SM asked:** morning_checkin cron runs at 16:00 UTC (4pm!). Shiva manually hunts for overnight activity.

**Aria said:**
> "Move morning_checkin from 0 0 16 * * * to 0 0 6 * * *"
> "Widget on / page — auto-dismisses after viewing, shows on first load"
> "Current state is broken: I work hard but communicate poorly"

**Status:** DONE — cron time fixed 16:00 UTC to 06:00 UTC. Morning brief widget is backlog.

---

## Code Changes Deployed This Session

| File | Change | Source |
|------|--------|--------|
| aria_mind/cron_jobs.yaml | morning_checkin cron 0 0 16 -> 0 0 6 | RT-10 |
| src/api/main.py | Ghost TTL: 15min -> 60min | RT-01 |
| src/api/main.py | Added _cron_session_cleanup_loop (6h, cron/swarm/subagent >7d) | RT-02 |
| aria_engine/session_manager.py | Added prune_sessions_by_type(session_type, days) method | RT-02 |
| src/web/templates/engine_chat.html | Model badge injected into message header on stream_end | RT-06 |

---

## Backlog Items (Next Sprint)

| Priority | Item | Source |
|----------|------|--------|
| P0 | Lazy session creation (no DB row until first message) | RT-01 |
| P1 | Agent selector in chat header (Auto / DevSecOps / Analyst / Creator / Chat) | RT-06 + RT-09 |
| P1 | Agent delegation routing in Cognition.process() | RT-03 |
| P1 | /operations dashboard for cron session reports | RT-02 |
| P1 | Archived Sessions browsable tab (Restore/View/Delete) | RT-04 |
| P2 | /rt slash command quick parallel roundtable from chat | RT-07 |
| P2 | Morning Brief widget on / page | RT-10 |
| P3 | Batch LLM title backfill for UUID-titled sessions with content | RT-08 |

---

## Session Links

| Session | Topic | URL |
|---------|-------|-----|
| RT-01 | Ghost sessions | https://192.168.1.53/chat/b42a97a4-6509-49b9-b813-c596696f2636 |
| RT-02 | Cron pollution | https://192.168.1.53/chat/f8e516f5-fb95-4483-8f6c-36d81ddc66af |
| RT-03 | Agent diversity | https://192.168.1.53/chat/ee3a40bd-f076-42d2-92fd-f352cb585c49 |
| RT-04 | Archive broken | https://192.168.1.53/chat/995cd843-60b3-41ce-a8b1-3afbeadc2925 |
| RT-05 | Pruning TTLs | https://192.168.1.53/chat/21ffeafe-55a2-43a8-85ed-0d77d4bdd48d |
| RT-06 | Agent visibility | https://192.168.1.53/chat/9f82fe07-cbf3-4641-8da7-f09b1e27a16c |
| RT-07 | Mini-roundtable /rt | https://192.168.1.53/chat/07925214-8234-4c05-89a7-24a56391b68c |
| RT-08 | Session titles | https://192.168.1.53/chat/8b3c3a6c-bd88-4576-aa89-6c6eb3e208fd |
| RT-09 | Model picker | https://192.168.1.53/chat/1fe38a9f-e0a2-4fb8-aaaf-67e068994e95 |
| RT-10 | Morning brief | https://192.168.1.53/chat/10e27cd8-4d42-4ab3-bd8c-a357965e97b1 |

---

*Souvenir created by GitHub Copilot (SM) after live roundtable sessions with Aria (PO) on production at 192.168.1.53.
All decisions are Aria's own words from live kimi model responses.*
