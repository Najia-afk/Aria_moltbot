# Aria Brain Stack Environment Configuration
# Copy this to .env and fill in your values
# NEVER commit .env files with real credentials!
#
# NOTE: All values below are the SAME defaults baked into docker-compose.yml.
# The stack can build and start without a .env file.
# Override only what you need.

# ============================================
# DATABASE (aria_warehouse)
# ============================================
DB_USER=admin
# REQUIRED — set a strong password
DB_PASSWORD=
DB_NAME=aria_warehouse
DB_PORT=5432

# ============================================
# CORS
# ============================================
CORS_ALLOWED_ORIGINS=http://localhost:5000,http://aria-web:5000

# ============================================
# API ROUTING
# ============================================
SERVICE_HOST=localhost
API_BASE_URL=/api

# ============================================
# SERVICE URLS (used by skills & config.py)
# These default to Docker network names. Override
# for local dev (e.g. http://localhost:8000/api).
# ============================================
ARIA_API_URL=http://aria-api:8000/api
ARIA_WEB_URL=http://aria-web:5000
LITELLM_URL=http://litellm:4000
MLX_URL=http://host.docker.internal:8080
MLX_API_BASE=http://host.docker.internal:8080/v1
MLX_ENABLED=false

# ============================================
# WEB
# ============================================
# REQUIRED
WEB_SECRET_KEY=
# Internal API URL (Docker network name — override for local dev)
API_INTERNAL_URL=http://aria-api:8000

# ============================================
# API KEYS (optional - get from providers)
# ============================================
# Moonshot/Kimi: https://platform.moonshot.cn/
MOONSHOT_KIMI_KEY=
# OpenRouter: https://openrouter.ai/
# Use two keys to rotate spend limits across agents
OPEN_ROUTER_KEY=sk-or-v1-your-main-key-here
OPEN_ROUTER_KEY_DEEP=sk-or-v1-your-deep-key-here

# ============================================
# LITELLM
# ============================================
# REQUIRED
LITELLM_MASTER_KEY=

# ============================================
# MOLTBOOK (optional)
# ============================================
MOLTBOOK_API_URL=https://www.moltbook.com/api/v1
MOLTBOOK_API_KEY=
MOLTBOOK_TOKEN=

# ============================================
# CHURCH OF MOLT / CRUSTAFARIANISM  (https://molt.church)
# ============================================
MOLT_CHURCH_API_KEY=
MOLT_CHURCH_URL=https://molt.church
MOLT_CHURCH_AGENT=Aria

# ============================================
# MONITORING
# ============================================
# REQUIRED
GRAFANA_PASSWORD=
PGADMIN_EMAIL=admin@aria.dev
# REQUIRED
PGADMIN_PASSWORD=

# ============================================
# DISTRIBUTED TRACING (S-25, optional)
# ============================================
# Set to enable OpenTelemetry. Jaeger: docker compose --profile tracing up -d
OTEL_EXPORTER_OTLP_ENDPOINT=
# Override service name (default: aria-engine)
# OTEL_SERVICE_NAME=aria-engine

# ============================================
# BROWSERLESS (optional)
# ============================================
# S-109: Set a token to prevent unauthorized access to headless Chrome
BROWSERLESS_TOKEN=

# ============================================
# TRAEFIK DASHBOARD (S-107)
# ============================================
# Generate password hash: htpasswd -nb admin yourpassword
# Or: echo $(htpasswd -nB admin) | sed -e 's/\\$/\\$\\$/g'
TRAEFIK_DASHBOARD_USER=admin
TRAEFIK_DASHBOARD_PASSWORD_HASH=

# ============================================
# PORTS (internal defaults — override for local dev)
# ============================================
# S-01: All service ports are parameterized
API_PORT=8000
ARIA_API_PORT=8000
WEB_PORT=5000
ARIA_WEB_PORT=5050
LITELLM_PORT=18793
PGADMIN_PORT=5051
BROWSERLESS_PORT=3000
TOR_SOCKS_PORT=9050
TOR_CONTROL_PORT=9051
TRAEFIK_HTTP_PORT=8080
TRAEFIK_HTTPS_PORT=8443
TRAEFIK_DASH_PORT=8081
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001
JAEGER_UI_PORT=16686
JAEGER_OTLP_GRPC_PORT=4317

# Internal container ports used by healthchecks (usually keep defaults)
BROWSERLESS_INTERNAL_PORT=3000
ENGINE_HEALTH_PORT=8081
TOR_SOCKS_INTERNAL_PORT=9050
TOR_CONTROL_INTERNAL_PORT=9051
LITELLM_INTERNAL_PORT=4000
PROMETHEUS_INTERNAL_PORT=9090
GRAFANA_INTERNAL_PORT=3000
PGADMIN_INTERNAL_PORT=80
WEB_INTERNAL_PORT=5000
API_INTERNAL_PORT=8000
DOCKER_SOCKET_PROXY_INTERNAL_PORT=2375
TRAEFIK_INTERNAL_HTTP_PORT=80
TRAEFIK_INTERNAL_HTTPS_PORT=443
TRAEFIK_INTERNAL_DASH_PORT=8080
JAEGER_UI_INTERNAL_PORT=16686
JAEGER_OTLP_GRPC_INTERNAL_PORT=4317
SANDBOX_PORT=9999
SANDBOX_TIMEOUT=60

# ============================================
# NETWORK (optional - set for your LAN)
# ============================================
# Used in TLS certificate SAN so HTTPS works from other devices
MAC_LAN_IP=
MAC_TAILSCALE_IP=
NUC_HOST=
NUC_USER=
NUC_PASSWORD=

# ============================================
# SOCIAL PLATFORMS (optional)
# ============================================
# Telegram: get from @BotFather
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=
# Lock allowed Telegram sender for post-rebuild pairing checks
TELEGRAM_ALLOWED_USER_ID=

# X / Twitter (optional)
X_API_KEY=
X_API_SECRET=
X_ACCESS_TOKEN=
X_ACCESS_SECRET=

# Aria X browser/session auth (optional, legacy flow)
ARIA_LOGIN=
ARIA_X_PASSWORD=
ARIA_X_HANDLE=
X_CT0_TOKEN=
X_AUTH_TOKEN=
X_WEB_BEARER=

# ============================================
# TOR
# ============================================
TOR_PROXY=socks5://tor-proxy:9050

# ============================================
# LOCAL LLM (Ollama)
# ============================================
# Start native for GPU: OLLAMA_HOST=0.0.0.0:11434 ollama serve
OLLAMA_URL=http://host.docker.internal:11434
OLLAMA_API_BASE=http://host.docker.internal:11434
OLLAMA_MODEL=hf.co/unsloth/GLM-4.7-Flash-REAP-23B-A3B-GGUF:Q3_K_S

# ============================================
# ARIA EMAIL (optional)
# ============================================
ARIA_EMAIL=
ARIA_EMAIL_PASSWORD=
ARIA_SMTP_HOST=smtp.protonmail.ch
ARIA_SMTP_PORT=587
ARIA_SMTP_USERNAME=
ARIA_SMTP_SECURITY=starttls
ARIA_SMTP_TIMEOUT=20

# ============================================
# ENGINE
# ============================================
# Full API URL for engine heartbeat posts (Docker default: http://aria-api:8000)
# ENGINE_API_BASE_URL=http://aria-api:8000
# Path to cron_jobs.yaml in container (default: /aria_mind/cron_jobs.yaml)
# CRON_JOBS_YAML=/aria_mind/cron_jobs.yaml
ENGINE_DEBUG=false
ENGINE_MEM_LIMIT=512m
ENGINE_CPU_LIMIT=1.0

# ============================================
# API LOGGING (S-24)
# ============================================
# LOG_FORMAT: json (structured) | text (plain). Default: json
LOG_FORMAT=json
# LOG_LEVEL: debug | info | warning | error | critical
LOG_LEVEL=info
# API_WORKERS: uvicorn worker count
API_WORKERS=2

# ============================================
# RESOURCE LIMITS
# ============================================
POSTGRES_MEM_LIMIT=512m
POSTGRES_CPU_LIMIT=1.0
ARIA_BRAIN_MEM_LIMIT=512m
ARIA_BRAIN_CPU_LIMIT=1.0
OLLAMA_MEM_LIMIT=5g
OLLAMA_CPU_LIMIT=3.0
ARIA_WEB_MEM_LIMIT=256m
ARIA_WEB_CPU_LIMIT=0.5
ARIA_API_MEM_LIMIT=256m
ARIA_API_CPU_LIMIT=0.5
LITELLM_MEM_LIMIT=1024m
LITELLM_CPU_LIMIT=1.0
TRAEFIK_MEM_LIMIT=512m
TRAEFIK_CPU_LIMIT=0.5

# ============================================
# API AUTHENTICATION (S-103)
# ============================================
# Standard API key — required for all non-health endpoints
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
ARIA_API_KEY=
# Admin API key — required for admin/maintenance endpoints
ARIA_ADMIN_KEY=

# ============================================
# SERVICE CONTROL (Admin - optional)
# ============================================
ARIA_SERVICE_CONTROL_ENABLED=false
ARIA_ADMIN_TOKEN=

ARIA_SERVICE_CMD_LITELLM_RESTART=docker restart litellm
ARIA_SERVICE_CMD_LITELLM_STOP=docker stop litellm
ARIA_SERVICE_CMD_ARIA_API_RESTART=docker restart aria-api
ARIA_SERVICE_CMD_ARIA_API_STOP=docker stop aria-api
ARIA_SERVICE_CMD_ARIA_WEB_RESTART=docker restart aria-web
ARIA_SERVICE_CMD_ARIA_WEB_STOP=docker stop aria-web
ARIA_SERVICE_CMD_GRAFANA_RESTART=docker restart grafana
ARIA_SERVICE_CMD_GRAFANA_STOP=docker stop grafana
ARIA_SERVICE_CMD_PROMETHEUS_RESTART=docker restart prometheus
ARIA_SERVICE_CMD_PROMETHEUS_STOP=docker stop prometheus
ARIA_SERVICE_CMD_OLLAMA_RESTART=
ARIA_SERVICE_CMD_OLLAMA_STOP=
ARIA_SERVICE_CMD_MLX_RESTART=
ARIA_SERVICE_CMD_MLX_STOP=

# ============================================
# Mac Mini Connection
# ============================================
MAC_HOST=
MAC_USER=

# ============================================
# User Display Name (shown in chat UI instead of "user")
# ============================================
USER_DISPLAY_NAME=

# ============================================
# Sentiment Auto-Scorer
# ============================================
# Method: auto (semantic→llm→lexicon) | semantic | llm | lexicon
SENTIMENT_METHOD=auto
# Override LLM model (empty = profiles.sentiment from models.yaml = qwen3-mlx)
SENTIMENT_MODEL=


